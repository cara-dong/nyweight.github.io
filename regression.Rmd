---
title: "Rregression Based on Data"
output: 
  html_document:
    toc: true
    toc_float: true
---
```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
```

```{r message=FALSE, warning=FALSE}
cleaned_data = read_csv("cleaned_data.csv")
```

* use sex group, grade level, num of healthyâ€¦ to predict num of overweight in a finer level

### Sex vs Percentage of overweight students
```{r message=FALSE, warning=FALSE}
train_data  = 
  cleaned_data |>
  select(year, sex, grade_level, 
         number_overweight, percent_overweight,
         number_obese, percent_obese, 
         number_overweight_or_obese, percent_overweight_or_obese,
         number_healthy_weight, percent_healthy_weight) |>
  mutate(sex = ifelse(sex=="FEMALE", 0, 1), 
         grade_level = ifelse(grade_level=="ELEMENTARY", 0, 1))
```

Check for normality of residuals:
```{r}
model <- lm(percent_overweight ~ sex, data = train_data)
hist(resid(model), breaks = "FD", main = "Histogram of Residuals")
```

Check for homocedasticity:
```{r}
plot(fitted(model), resid(model))
abline(h = 0, col = "red")
```
The variance of the residuals is roughly constant across all levels of the predictor. Checked.

Fit the model:
```{r}
sex_slr = lm(percent_overweight ~ sex, data=train_data) |> broom::tidy()

knitr::kable(sex_slr)
```
Based on parameter estimate of -1.177219 with a p value of almost 0, being in the group of xxx sex had a negative relationship with the percent of overweight.

Now, try using grade level to predict percent of overweight:
```{r}

```


### Percentage of healthy students vs Percentage of overweight students

Use anova test to see if we want to use SLR (with only sex or grade level) or MLR to predict:
```{r}

```


* use num_asian/num_hipanic/num_white...for each county (demographic) data to predict num of overweight in a county level